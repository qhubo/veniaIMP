<?php

/**
 * Skeleton subclass for representing a row from the 'gasto_caja' table.
 *
 *
 *
 * This class was autogenerated by Propel 1.6.7 on:
 *
 * 12/01/22 18:47:30
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    propel.generator.lib.model
 */
class GastoCaja extends BaseGastoCaja {

    public function getValorImpuesto() {
        $detalleIva = GastoCajaDetalleQuery::create()
                ->filterByGastoCajaId($this->getId())
                ->withColumn('sum(GastoCajaDetalle.ValorRetieneIva)', 'TotalRetieneIva')
                ->findOne();
        $VALOR_RETIENE_IVA = 0;
        if ($detalleIva) {
            $VALOR_RETIENE_IVA = $detalleIva->getTotalRetieneIva();
        }
        $detalleIva = GastoCajaDetalleQuery::create()
                ->filterByGastoCajaId($this->getId())
                ->withColumn('sum(GastoCajaDetalle.ValorIsr)', 'TotalRetieneIva')
                ->findOne();
        $VALOR_ISR = 0;
        if ($detalleIva) {
            $VALOR_ISR = $detalleIva->getTotalRetieneIva();
        }
        $retorna = $VALOR_ISR + $VALOR_RETIENE_IVA;
        return $retorna;
    }

    public function getValorIsr() {
        $detalleIva = GastoCajaDetalleQuery::create()
                ->filterByGastoCajaId($this->getId())
                ->withColumn('sum(GastoCajaDetalle.ValorIsr)', 'TotalValorIsr')
                ->findOne();
        $ValorIsr = 0;
        if ($detalleIva) {
            $ValorIsr = $detalleIva->getTotalRetieneIva();
        }

        $retorna = $ValorIsr;
        return $retorna;
    }

    public function getValorRetieneIva() {
        $detalleIva = GastoCajaDetalleQuery::create()
                ->filterByGastoCajaId($this->getId())
                ->withColumn('sum(GastoCajaDetalle.ValorRetieneIva)', 'TotalRetieneIva')
                ->findOne();
        $VALOR_RETIENE_IVA = 0;
        if ($detalleIva) {
            $VALOR_RETIENE_IVA = $detalleIva->getTotalRetieneIva();
        }
        $retorna = $VALOR_RETIENE_IVA;
        return $retorna;
    }

    public function getValorTotal() {
        $detalleIva = GastoCajaDetalleQuery::create()
                ->filterByGastoCajaId($this->getId())
                ->withColumn('sum(GastoCajaDetalle.Valor)', 'TotalValor')
                ->findOne();
        $TotalValor = 0;
        if ($detalleIva) {
            $TotalValor = $detalleIva->getTotalValor();
        }

        $retorna = $TotalValor;
        return $retorna;
    }

  
    public function getValorIDP() {
        $detalleIva = GastoCajaDetalleQuery::create()
                   ->filterByGastoCajaId($this->getId())
                ->withColumn('sum(GastoCajaDetalle.ValorIdp)', 'TotalValor')
                ->findOne();
        $TotalValor = 0;
        if ($detalleIva) {
            $TotalValor = $detalleIva->getTotalValor();
        }
        $retorna = $TotalValor;
        return $retorna;
    }

    
}
